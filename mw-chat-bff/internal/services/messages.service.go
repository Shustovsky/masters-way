package services

import (
	openapiChat "mw-chat-bff/apiAutogenerated/chat"

	"github.com/gin-gonic/gin"
)

type MessagesService struct {
	chatAPI *openapiChat.APIClient
}

func NewMessagesService(chatAPI *openapiChat.APIClient) *MessagesService {
	return &MessagesService{chatAPI}
}

func (messagesService *MessagesService) UpdateMessageStatus(ctx *gin.Context, messageID string, isRead bool) error {
	payload := openapiChat.SchemasUpdateMessageStatusPayload{
		IsRead: isRead,
	}

	_, err := messagesService.chatAPI.MessageAPI.UpdateMessageStatus(ctx, messageID).Request(payload).Execute()
	if err != nil {
		return err
	}

	return nil
}
